modules = ["python-3.12", "c-clang14"]
compile = "make"

[nix]
channel = "stable-25_05"

[deployment]
build = ["sh", "-c", "make"]

[workflows]
runButton = "Start All Services"

[[workflows.workflow]]
name = "Start All Services"
author = 46410154
mode = "parallel"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd api_gateway && python src/main.py"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd admin_panel && python -m uvicorn src.entrypoints.api.fastapi_main:app --host 0.0.0.0 --port 8001"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd source_management && python -m uvicorn src.entrypoints.api.fastapi_main:app --host 0.0.0.0 --port 8002"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd conversation && python -m uvicorn src.entrypoints.api.fastapi_main:app --host 0.0.0.0 --port 8003"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd ui && python -m http.server 3000"
